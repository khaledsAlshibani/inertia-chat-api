@baseUrl = {{$dotenv API_BASE_URL}}
@contentType = application/json
@cookieJar = api/auth

### Login
# @name login
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "emailOrUsername": "ahmed",
  "password": "password123"
}

### Get all users except current user
GET {{baseUrl}}/users
Authorization: Bearer {{login.response.body.data.accessToken}}

### Get current user profile
GET {{baseUrl}}/users/me
Authorization: Bearer {{login.response.body.data.accessToken}}

### Update user status
PATCH {{baseUrl}}/users/me/status
Content-Type: {{contentType}}
Authorization: Bearer {{login.response.body.data.accessToken}}

{
    "status": "OFFLINE"
}

### Update user profile
# @name updateProfile
PUT {{baseUrl}}/users/me
Content-Type: {{contentType}}
Authorization: Bearer {{login.response.body.data.accessToken}}

{
    "name": "Ahmed",
    "username": "ahmed",
    "profilePicture": "https://i.pravatar.cc/150?img=2"
}

### Delete user profile
DELETE {{baseUrl}}/users/me
Content-Type: {{contentType}}
Authorization: Bearer {{login.response.body.data.accessToken}}

{
    "password": "password123"
}

### Find existing 1:1 chat with another user
# Replace {userId} with the actual user ID you want to chat with
GET {{baseUrl}}/chats/with/1
Authorization: Bearer {{login.response.body.data.accessToken}}

### Create new 1:1 chat with another user
# Replace {userId} with the actual user ID you want to chat with
POST {{baseUrl}}/chats/with/1
Authorization: Bearer {{login.response.body.data.accessToken}}

### Get all chats for current user
GET {{baseUrl}}/chats
Authorization: Bearer {{login.response.body.data.accessToken}}